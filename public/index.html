<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MMChat - Login</title>
<style>
  body,html {
    margin:0; padding:0;
    height:100vh;
    display:flex; justify-content:center; align-items:center;
    background: linear-gradient(135deg, #001F3F, #0074D9);
    font-family: 'Inter', sans-serif;
  }
  .login-box {
    background:#d1d1d1;
    border-radius:12px;
    box-shadow:0 0 15px #0006;
    padding:2rem;
    width: 90vw;
    max-width: 320px;
    text-align:center;
  }
  h1 {
    margin-bottom:1rem;
    color:#004b99;
  }
  input[type=text] {
    width: 100%;
    padding: 0.6rem 0.8rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #999;
    margin-bottom: 1rem;
  }
  label {
    font-weight: 600;
    color: #004b99;
  }
  input[type=color] {
    width: 100%;
    height: 2.5rem;
    border: none;
    margin-bottom: 1rem;
    cursor: pointer;
  }
  button {
    width: 100%;
    background: #4b82f7;
    border: none;
    border-radius: 6px;
    color: white;
    font-size: 1.1rem;
    padding: 0.7rem;
    cursor: pointer;
    font-weight: 700;
    transition: background 0.3s;
  }
  button:hover {
    background: #3761c7;
  }
</style>
</head>
<body>
  <div class="login-box">
    <h1>Entrar no MMChat</h1>
    <form id="loginForm">
      <input type="text" id="username" placeholder="Digite seu nick" maxlength="20" required autofocus />
      <label for="nickColor">Escolha a cor do seu nick</label>
      <input type="color" id="nickColor" value="#007bff" />
      <button type="submit">Entrar</button>
    </form>
  </div>
<script>
  const loginForm = document.getElementById('loginForm');
  const usernameInput = document.getElementById('username');
  const nickColorInput = document.getElementById('nickColor');

  // Se já tiver salvo, preenche inputs
  if(localStorage.getItem('mmchat_username')){
    usernameInput.value = localStorage.getItem('mmchat_username');
  }
  if(localStorage.getItem('mmchat_nickColor')){
    nickColorInput.value = localStorage.getItem('mmchat_nickColor');
  }

  loginForm.addEventListener('submit', e => {
    e.preventDefault();
    const username = usernameInput.value.trim() || 'Anônimo';
    const nickColor = nickColorInput.value || '#007bff';
    localStorage.setItem('mmchat_username', username);
    localStorage.setItem('mmchat_nickColor', nickColor);
    // Redireciona para a sala de chat com parâmetros na URL
    window.location.href = `chat.html?username=${encodeURIComponent(username)}&color=${encodeURIComponent(nickColor)}`;
  });
</script>
</body>
</html>
